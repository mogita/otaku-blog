<!DOCTYPE html>
<html lang="en">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <title>
  Laravel 5 Homestead 日常工作流程 · mogita
</title>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="author" content="Yun Wang">
<meta name="description" content="本文是教程的第三步，并假设你已安装好全部所需软件。 本章将探索两种 composer 工具：homestead 和 laravel。接下来讲解一种典型的日常工作流程">
<meta name="keywords" content="blog,developer,personal">

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Laravel 5 Homestead 日常工作流程"/>
<meta name="twitter:description" content="本文是教程的第三步，并假设你已安装好全部所需软件。 本章将探索两种 composer 工具：homestead 和 laravel。接下来讲解一种典型的日常工作流程"/>

<meta property="og:title" content="Laravel 5 Homestead 日常工作流程" />
<meta property="og:description" content="本文是教程的第三步，并假设你已安装好全部所需软件。 本章将探索两种 composer 工具：homestead 和 laravel。接下来讲解一种典型的日常工作流程" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/posts/laravel-homestead-daily-workflow.html" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2015-11-23T10:51:15+00:00" />
<meta property="article:modified_time" content="2022-08-28T11:08:04+08:00" />





<link rel="canonical" href="http://localhost:1313/posts/laravel-homestead-daily-workflow.html">


<link rel="preload" href="/fonts/forkawesome-webfont.woff2?v=1.2.0" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/css/coder.css" media="screen">






  
    
    
    <link rel="stylesheet" href="/css/coder-dark.css" media="screen">
  



 




<link rel="icon" type="image/png" href="/img/favicons/favicon32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/img/favicons/favicon16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/img/favicons/favicon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/img/favicons/favicon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">




<meta name="generator" content="Hugo 0.101.0" />





  </head>






<body class="preload-transitions colorscheme-auto">
  
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="/">
      mogita
    </a>
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link" href="/posts/">Posts</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="/index.xml">RSS</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="/tags.html">Tags</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="/about.html">About</a>
            </li>
          
        
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="http://localhost:1313/posts/laravel-homestead-daily-workflow.html">
              Laravel 5 Homestead 日常工作流程
            </a>
          </h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fa fa-calendar" aria-hidden="true"></i>
              <time datetime="2015-11-23T10:51:15Z">
                November 23, 2015
              </time>
            </span>
            <span class="reading-time">
              <i class="fa fa-clock-o" aria-hidden="true"></i>
              7-minute read
            </span>
          </div>
          
          
          <div class="tags">
  <i class="fa fa-tag" aria-hidden="true"></i>
    <span class="tag">
      <a href="/tags/php/">PHP</a>
    </span>
      <span class="separator">•</span>
    <span class="tag">
      <a href="/tags/laravel/">Laravel</a>
    </span>
      <span class="separator">•</span>
    <span class="tag">
      <a href="/tags/homestead/">Homestead</a>
    </span></div>

        </div>
      </header>

      <div class="post-content">
        
        <blockquote>
<p>本文是教程的第三步，并假设你已安装好全部所需软件。</p>
</blockquote>
<p>本章将探索两种 composer 工具：homestead 和 laravel。接下来讲解一种典型的日常工作流程，通过 6 个步骤，来建立一个新的 Laravel 5.1 工程。</p>
<h2 id="目录">
  目录
  <a class="heading-link" href="#%e7%9b%ae%e5%bd%95">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<ul>
<li><a href="#56-homestead-tools">Homestead 工具</a></li>
<li><a href="#56-homestead-overview">常用 Homestead 命令概览</a></li>
<li><a href="#56-homestead-yaml">了解 Homestead.yaml</a></li>
<li><a href="#56-homestead-software">向 Homestead 虚拟机添加软件</a></li>
<li><a href="#56-daily-workflow">日常工作流程</a></li>
<li><a href="#56-6-steps">六个步骤开启一个全新 Laravel 5.1 工程</a>
<ul>
<li><a href="#56-step-1">第一步 – 创建应用骨架</a></li>
<li><a href="56-step-2">第二步 – 配置 Web 服务器</a></li>
<li><a href="56-step-3">第三步 – 添加主机记录到 Hosts 文件</a></li>
<li><a href="#56-step-4">第四步 – NPM 本地安装</a></li>
<li><a href="#56-step-5">第五步 – 创建应用的数据库</a></li>
<li><a href="#56-step-6">第六步 – 在浏览器中测试</a></li>
</ul>
</li>
<li><a href="#56-homestead-tips">其他 Homestead 小贴士</a></li>
<li><a href="#56-recap">本文回顾</a></li>
</ul>
<h2 id="homestead-工具">
  Homestead 工具
  <a class="heading-link" href="#homestead-%e5%b7%a5%e5%85%b7">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<blockquote>
<p><strong>什么是控制台</strong></p>
<p>每当你需要在控制台里进行一些操作时，你需要搞清楚是哪种控制台。</p>
<p><strong>Homestead 控制台</strong>是指通过 SSH 连接到 Homestead 虚拟机。在 Windows 系统中，可以是通过 PuTTY 建立的连接（详情请阅读在 Windows 系统建立虚拟机的章节）。在其他操作系统中，在终端执行<code>homestead ssh</code> 命令就可以进行连接了。在本文中，凡是跟在 <code>$</code> 后边的命令，都是在 Homestead 终端执行的。</p>
<p><strong>OS 控制台</strong>是指 Windows 的命令行提示符或者其他你正在使用的终端软件。（本文中 <code>%</code> 符号后边的命令都是在 OS 控制台中执行的）</p>
</blockquote>
<p>在宿主机的控制台中，我们输入 homestead 命令（不带任何参数），就可以轻松查看所有可用的 homestead 参数和命令。</p>
<h2 id="homestead-命令">
  Homestead 命令
  <a class="heading-link" href="#homestead-%e5%91%bd%e4%bb%a4">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>% homestead
</span></span><span style="display:flex;"><span>Laravel Homestead version 2.0.9
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Usage:
</span></span><span style="display:flex;"><span>[options] command [arguments]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Options:
</span></span><span style="display:flex;"><span>--help           -h Display this help message.
</span></span><span style="display:flex;"><span>--quiet          -q Do not output any message.
</span></span><span style="display:flex;"><span>--verbose        -v|vv|vvv Increase the verbosity of messages: 1 for normal output, 2 for more verbose output and 3 for debug.
</span></span><span style="display:flex;"><span>--version        -V Display this application version.
</span></span><span style="display:flex;"><span>--ansi           Force ANSI output.
</span></span><span style="display:flex;"><span>--no-ansi        Disable ANSI output.
</span></span><span style="display:flex;"><span>--no-interaction -n Do not ask any interactive question.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Available commands:
</span></span><span style="display:flex;"><span>destroy   Destroy the Homestead machine
</span></span><span style="display:flex;"><span>edit      Edit the Homestead.yaml file
</span></span><span style="display:flex;"><span>halt      Halt the Homestead machine
</span></span><span style="display:flex;"><span>help      Displays help for a command
</span></span><span style="display:flex;"><span>init      Create a stub Homestead.yaml file
</span></span><span style="display:flex;"><span>list      Lists commands
</span></span><span style="display:flex;"><span>provision Re-provisions the Homestead machine
</span></span><span style="display:flex;"><span>resume    Resume the suspended Homestead machine
</span></span><span style="display:flex;"><span>run       Run commands through the Homestead machine via SSH
</span></span><span style="display:flex;"><span>ssh       Login to the Homestead machine via SSH
</span></span><span style="display:flex;"><span>status    Get the status of the Homestead machine
</span></span><span style="display:flex;"><span>suspend   Suspend the Homestead machine
</span></span><span style="display:flex;"><span>up        Start the Homestead machine
</span></span><span style="display:flex;"><span>update    Update the Homestead machine image
</span></span></code></pre></div><p>我们每天接触最多的一个命令是 <code>homestead up</code>，用来启动 Homestead 虚拟机。</p>
<h2 id="常用-homestead-命令概览">
  常用 Homestead 命令概览
  <a class="heading-link" href="#%e5%b8%b8%e7%94%a8-homestead-%e5%91%bd%e4%bb%a4%e6%a6%82%e8%a7%88">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>这里是一系列常用的 Homestead 命令。</p>
<ul>
<li><code>homestead up</code> 启动 Homestead 虚拟机，或者说「点亮」虚拟机的电源。如果你使用了 provision 选项（<code>homestead up --provision</code>），则 provision 配置将对所有新增加的站点都生效。</li>
<li><code>homestead halt</code> 停止 Homestead 虚拟机，或者说「关闭」虚拟机的电源。</li>
<li><code>homestead suspend</code> 暂停 Homestead 虚拟机，可以理解为休眠。</li>
<li><code>homestead resume</code> 将暂停的 Homestead 虚拟机恢复运行。</li>
<li><code>homestead edit</code> 编辑 Homestead.yaml 文件。这个命令将使用当前与 YAML 文件格式关联的编辑器软件。</li>
<li><code>homestead status</code> 查看 Homestead 虚拟机的当前状态</li>
</ul>
<h2 id="了解-homesteadyaml">
  了解 Homestead.yaml
  <a class="heading-link" href="#%e4%ba%86%e8%a7%a3-homesteadyaml">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>Laravel Homestead 的配置都在 Homestead.yaml 文件中。该文件位于你的宿主系统 home 目录中的 <code>.homestead</code> 目录下。</p>
<p>查看该文件的内容，大致如下。</p>
<h4 id="homesteadyaml-的内容">
  Homestead.yaml 的内容
  <a class="heading-link" href="#homesteadyaml-%e7%9a%84%e5%86%85%e5%ae%b9">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h4>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#8fbcbb">---</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1">ip</span><span style="color:#eceff4">:</span> <span style="color:#a3be8c">&#34;192.168.10.10&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1">memory</span><span style="color:#eceff4">:</span> <span style="color:#b48ead">2048</span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1">cpus</span><span style="color:#eceff4">:</span> <span style="color:#b48ead">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1">authorize</span><span style="color:#eceff4">:</span> ~/.ssh/id_rsa.pub
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1">keys</span><span style="color:#eceff4">:</span>
</span></span><span style="display:flex;"><span>- ~/.ssh/id_rsa
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1">folders</span><span style="color:#eceff4">:</span>
</span></span><span style="display:flex;"><span>- <span style="color:#81a1c1">map</span><span style="color:#eceff4">:</span> ~/Code
</span></span><span style="display:flex;"><span><span style="color:#81a1c1">to</span><span style="color:#eceff4">:</span> /home/vagrant/Code
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1">sites</span><span style="color:#eceff4">:</span>
</span></span><span style="display:flex;"><span>- <span style="color:#81a1c1">map</span><span style="color:#eceff4">:</span> homestead.app
</span></span><span style="display:flex;"><span><span style="color:#81a1c1">to</span><span style="color:#eceff4">:</span> /home/vagrant/Code/Laravel/public
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1">databases</span><span style="color:#eceff4">:</span>
</span></span><span style="display:flex;"><span>- homestead
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1">variables</span><span style="color:#eceff4">:</span>
</span></span><span style="display:flex;"><span>- <span style="color:#81a1c1">key</span><span style="color:#eceff4">:</span> APP_ENV
</span></span><span style="display:flex;"><span><span style="color:#81a1c1">value</span><span style="color:#eceff4">:</span> local
</span></span></code></pre></div><p>下面逐一解释各个配置部分：</p>
<ul>
<li><code>ip</code> 访问虚拟机所用的内网 IP。</li>
<li><code>memory</code> 虚拟机的可用内存。</li>
<li><code>cpus</code> 虚拟机的可用 CPU 数目。</li>
<li><code>authorize</code> 此项应该指向你的 SSH 公钥。</li>
<li><code>keys</code> 你的 SSH 私钥。</li>
<li><code>folders</code> 共享文件夹，即宿主机中的文件夹和对应在虚拟机中的文件夹。在 Windows 系统中，<code>~/Code</code> 目录大致上等同于 <code>C:\Users\YOU\Code</code> 文件夹。在 OS X 中为<code>/Users/YOU/Code</code>。在 Linux 中通常是 <code>/home/YOU/Code</code>。当你在宿主机的这个文件夹里进行文件操作时，虚拟机中的对应目录中也会立即发生改变。</li>
<li><code>sites</code> 站点列表（各个域名指向的路径），每当 Homestead 虚拟机启动时将生效。</li>
<li><code>databases</code> Homestead 应该能自动创建的数据库列表。</li>
<li><code>variables</code> 将在 Homestead 环境中生效的变量。</li>
</ul>
<blockquote>
<p><strong>配置小技巧</strong></p>
<p>我一般只对一处进行修改，将数据库下边的 homestead 改名为 xhomestead。这样做的目的在于，如果我忘记为新应用创建数据库，就会报错。否则，会使用默认的 homestead 数据库，我却无法察觉。</p>
</blockquote>
<p>那么现在，除了 <strong>database</strong> 之外，我们不修改任何配置。</p>
<h4 id="homestead-虚拟机详细配置">
  Homestead 虚拟机详细配置
  <a class="heading-link" href="#homestead-%e8%99%9a%e6%8b%9f%e6%9c%ba%e8%af%a6%e7%bb%86%e9%85%8d%e7%bd%ae">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h4>
<table>
<thead>
<tr>
<th><strong>字段</strong></th>
<th><strong>值</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Hostname</td>
<td>homestead</td>
</tr>
<tr>
<td>IP Address</td>
<td>192.168.10.10</td>
</tr>
<tr>
<td>Username</td>
<td>vagrant</td>
</tr>
<tr>
<td>SU Password</td>
<td>vagrant</td>
</tr>
<tr>
<td>Database Host</td>
<td>127.0.0.1</td>
</tr>
<tr>
<td>Database Port</td>
<td>33060</td>
</tr>
<tr>
<td>Database Username</td>
<td>homestead</td>
</tr>
<tr>
<td>Database Password</td>
<td>secret</td>
</tr>
</tbody>
</table>
<h2 id="向-homestead-虚拟机添加软件">
  向 Homestead 虚拟机添加软件
  <a class="heading-link" href="#%e5%90%91-homestead-%e8%99%9a%e6%8b%9f%e6%9c%ba%e6%b7%bb%e5%8a%a0%e8%bd%af%e4%bb%b6">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>若你需要在 Homestead 虚拟机中安装新的软件，可以使用 Ubuntu 的 <code>apt-get</code> 命令。</p>
<p>这是非常简便的两个步骤：</p>
<ul>
<li>升级 Ubuntu</li>
<li>用 apt-get 安装</li>
</ul>
<p>下边举例说明，当我们需要 unzip 这个软件时，应该怎样进行安装。</p>
<h4 id="升级-ubuntu">
  升级 Ubuntu
  <a class="heading-link" href="#%e5%8d%87%e7%ba%a7-ubuntu">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h4>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#616e87;font-style:italic"># 将 Ubuntu 软件升级到最新</span>
</span></span><span style="display:flex;"><span>vagrant@homestead:~$ sudo apt-get update
</span></span><span style="display:flex;"><span>vagrant@homestead:~$ sudo apt-get upgrade
</span></span></code></pre></div><p>选择「Y」来继续安装。如果安装过程中出现什么提示，尽量选择已有的或默认配置。</p>
<p>升级完 Homestead 虚拟机里的 Ubuntu 系统之后，就可以安装 unzip 了。</p>
<h4 id="通过-apt-get-安装-unzip">
  通过 apt-get 安装 unzip
  <a class="heading-link" href="#%e9%80%9a%e8%bf%87-apt-get-%e5%ae%89%e8%a3%85-unzip">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h4>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#616e87;font-style:italic"># 在 Homestead 虚拟机中安装 unzip</span>
</span></span><span style="display:flex;"><span>vagrant@homestead:~$ sudo apt-get install unzip
</span></span></code></pre></div><h2 id="日常工作流程">
  日常工作流程
  <a class="heading-link" href="#%e6%97%a5%e5%b8%b8%e5%b7%a5%e4%bd%9c%e6%b5%81%e7%a8%8b">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>通常，使用 homestead 处理日常工作的流程主要分成三个步骤：</p>
<p><strong>第一步：</strong><code>homestead up</code> 启动 Homestead 虚拟机开始一天的工作。
<strong>第二步：</strong><code>homestead ssh</code>、<code>PuTTY</code> 通过 SSH 连接到 Homestead 虚拟机，直接访问文件，并执行 artisan 命令。
**第三步：**编写优美的代码。在宿主系统中，打开你最爱的编辑器，开始写代码。
<strong>可选的第四步：</strong><code>homestead halt</code> 一天的工作结束后，你可以选择关闭 Homestead 虚拟机的电源。</p>
<h2 id="六个步骤开启一个全新-laravel-51-工程">
  六个步骤开启一个全新 Laravel 5.1 工程
  <a class="heading-link" href="#%e5%85%ad%e4%b8%aa%e6%ad%a5%e9%aa%a4%e5%bc%80%e5%90%af%e4%b8%80%e4%b8%aa%e5%85%a8%e6%96%b0-laravel-51-%e5%b7%a5%e7%a8%8b">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>每次建立新的 Laravel 5.1 应用时，你都可以跟随下边的六大步骤来进行。</p>
<p>比方说，我们要创建一个名叫 <code>test.app</code> 的工程，项目文件夹的名字就叫 <code>test</code>。</p>
<h4 id="第一步-创建应用骨架">
  第一步 创建应用骨架
  <a class="heading-link" href="#%e7%ac%ac%e4%b8%80%e6%ad%a5-%e5%88%9b%e5%bb%ba%e5%ba%94%e7%94%a8%e9%aa%a8%e6%9e%b6">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h4>
<p>通过 Laravel Installer（前置章节中安装好的 <code>laravel</code> 命令），可以迅速创建一个工程骨架。</p>
<p>创建一个新的应用骨架</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ laravel new <span style="color:#81a1c1">test</span>
</span></span><span style="display:flex;"><span>Crafting application...
</span></span><span style="display:flex;"><span>Generating optimized class loader
</span></span><span style="display:flex;"><span>Compiling common classes
</span></span><span style="display:flex;"><span>Application key <span style="color:#81a1c1">[</span>rzUhyDksVxzTXFjzFYiOWToqpunI2m6X<span style="color:#81a1c1">]</span> <span style="color:#81a1c1">set</span> successfully.
</span></span><span style="display:flex;"><span>Application ready! Build something amazing.
</span></span></code></pre></div><h4 id="第二步-配置-web-服务器">
  第二步 配置 Web 服务器
  <a class="heading-link" href="#%e7%ac%ac%e4%ba%8c%e6%ad%a5-%e9%85%8d%e7%bd%ae-web-%e6%9c%8d%e5%8a%a1%e5%99%a8">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h4>
<p>安装好应用骨架后，就可以在 homestead 环境中启动 Nginx 服务器，来为应用的<code>public</code> 目录建立网页服务了。</p>
<p>Homestead 环境中的 <code>serve</code> 命令可以轻松完成这一任务。</p>
<p>在 Homestead 中启动一个新的虚拟主机</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ serve test.app ~/Code/test/public
</span></span><span style="display:flex;"><span>dos2unix: converting file /vagrant/scripts/serve.sh to Unix format ...
</span></span><span style="display:flex;"><span>* Restarting nginx nginx                                    <span style="color:#81a1c1">[</span> OK <span style="color:#81a1c1">]</span>
</span></span><span style="display:flex;"><span>php5-fpm stop/waiting
</span></span><span style="display:flex;"><span>php5-fpm start/running, process <span style="color:#b48ead">2169</span>
</span></span></code></pre></div><p>这条命令会在 <code>/etc/nginx/sites-available</code> 目录下，为 <strong>test.app</strong> 生成一个新的配置文件，并在 <code>/etc/nginx/sites-enabled</code> 目录下生成一个指向该配置文件的软连接。</p>
<p>即使虚拟机重启，该配置也会依然存在。</p>
<blockquote>
<p><strong>为什么不直接编辑 Homestead.yaml</strong></p>
<p>你问得对。另外一种建立 test.app 服务器的方式是 <code>homestead edit</code> 命令，并在 <em>sites:</em> 下边输入新的站点信息。但 serve 命令更简单，并且无需重新配置并启动 Homestead 虚拟机。</p>
<p>然而，有时你可能需要经常对某个应用进行配置，你完全可以去编辑 Homestead.yaml 文件。</p>
</blockquote>
<h4 id="第三步添加主机记录到-hosts-文件">
  第三步 添加主机记录到 Hosts 文件
  <a class="heading-link" href="#%e7%ac%ac%e4%b8%89%e6%ad%a5%e6%b7%bb%e5%8a%a0%e4%b8%bb%e6%9c%ba%e8%ae%b0%e5%bd%95%e5%88%b0-hosts-%e6%96%87%e4%bb%b6">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h4>
<p>截至目前，test.app 的域名还无法解析（没有任何 DNS 记录），必须向宿主系统的 hosts 文件添加一条记录。编辑 Linux 或 OS X 中的 <code>/etc/hosts</code> 文件。Windows 系统中，该文件位于 <code>C:\Windows\System32\drivers\etc\hosts</code>。将 <code>test.app</code> 这个域名指向 <code>Homestead.yaml</code> 文件中指定的 IP 地址即可。</p>
<p>例如将下一行加入文件中。</p>
<p><strong>Test.app 的 Host 记录</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>192.168.10.10  test.app
</span></span></code></pre></div><blockquote>
<p><strong>Windows 系统需要管理员权限来编辑 hosts 文件</strong></p>
<p>在 Windows 中，你必须以管理员身份运行编辑器软件（例如写字板或 Sublime Text 等）。在 Linux 或 OS X 中则可以使用 <code>sudo</code> 命令。</p>
</blockquote>
<p>在 Linux 或 OS X 中编辑 hosts 文件</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo nano /etc/hosts
</span></span><span style="display:flex;"><span>// or
</span></span><span style="display:flex;"><span>sudo vi /etc/hosts
</span></span></code></pre></div><h4 id="第四步npm-本地安装">
  第四步 NPM 本地安装
  <a class="heading-link" href="#%e7%ac%ac%e5%9b%9b%e6%ad%a5npm-%e6%9c%ac%e5%9c%b0%e5%ae%89%e8%a3%85">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h4>
<p>为了稍后可以使用 <code>gulp</code>，我们需要将所需的 npm 模块都在本地安装好。</p>
<p><strong>如果你用不到 gulp，那么就跳过这一步吧。</strong></p>
<p>在宿主系统的控制台中进入工程所在的目录，并执行以下命令。</p>
<p>NPM 本地安装</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>$ cd Code/test
</span></span><span style="display:flex;"><span>~/Code/test% npm install
</span></span><span style="display:flex;"><span>npm WARN package.json @ No repository field.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>v8flags@1.0.5 install /Users/chuck/Code/test/node_modules/gulp/\
</span></span><span style="display:flex;"><span>node_modules/v8flags
</span></span><span style="display:flex;"><span>&gt; node fetch.js
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>flags for v8 3.14.5.9 cached.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[snip]
</span></span></code></pre></div><p>这样，gulp 所需的所有依赖都会安装到工程目录中的 <code>node_modules</code> 文件夹了。</p>
<h4 id="第五步创建应用的数据库">
  第五步 创建应用的数据库
  <a class="heading-link" href="#%e7%ac%ac%e4%ba%94%e6%ad%a5%e5%88%9b%e5%bb%ba%e5%ba%94%e7%94%a8%e7%9a%84%e6%95%b0%e6%8d%ae%e5%ba%93">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h4>
<p>如果应用需要数据库，进入 Homestead 虚拟机的 <strong>mysql</strong> 控制台就能轻松创建数据库了。</p>
<p>在 Homestead 虚拟机中创建数据库</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ mysql --user<span style="color:#81a1c1">=</span>homestead --password<span style="color:#81a1c1">=</span>secret
</span></span><span style="display:flex;"><span>mysql&gt; create database test<span style="color:#eceff4">;</span>
</span></span><span style="display:flex;"><span>mysql&gt; exit<span style="color:#eceff4">;</span>
</span></span></code></pre></div><p>数据库创建好之后，你需要在工程的根目录中找到 <code>.env</code> 文件，编辑其中的 <code>DB_NAME</code> 字段为适合的值。</p>
<p>修改 <code>.env</code> 中的 <code>DB_NAME</code></p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#616e87;font-style:italic">// Change the following line
</span></span></span><span style="display:flex;"><span><span style="color:#616e87;font-style:italic"></span>DB_DATABASE<span style="color:#81a1c1">=</span>homestead
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#616e87;font-style:italic">// To the correct value
</span></span></span><span style="display:flex;"><span><span style="color:#616e87;font-style:italic"></span>DB_DATABASE<span style="color:#81a1c1">=</span>test
</span></span></code></pre></div><p>就是这样简单。现在，你可以对数据表进行迁移和创建等操作了。之后的章节将进一步介绍这些操作。</p>
<h4 id="第六步在浏览器中测试">
  第六步 在浏览器中测试
  <a class="heading-link" href="#%e7%ac%ac%e5%85%ad%e6%ad%a5%e5%9c%a8%e6%b5%8f%e8%a7%88%e5%99%a8%e4%b8%ad%e6%b5%8b%e8%af%95">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h4>
<p>打开浏览器，输入 <code>http://test.app</code>，你就能看到下面的画面了。</p>
<p>默认的 Laravel 5.1 首页</p>
<p><img src="https://leanpub.com/site_images/l5-beauty/l5-welcome-page.jpg" alt="l5-welcome-page"></p>
<p>如果你看到的不是这个画面，那么之前的步骤中或许有不正确的地方。</p>
<h2 id="其他-homestead-小贴士">
  其他 Homestead 小贴士
  <a class="heading-link" href="#%e5%85%b6%e4%bb%96-homestead-%e5%b0%8f%e8%b4%b4%e5%a3%ab">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<h4 id="请在宿主系统中编写代码">
  请在宿主系统中编写代码
  <a class="heading-link" href="#%e8%af%b7%e5%9c%a8%e5%ae%bf%e4%b8%bb%e7%b3%bb%e7%bb%9f%e4%b8%ad%e7%bc%96%e5%86%99%e4%bb%a3%e7%a0%81">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h4>
<p>之前的章节我们提到了这一点，这里再强调一次。请把代码编辑工作都放在宿主系统中进行。共享文件夹使用起来非常便捷，你在宿主系统的工程文件夹中进行的任何更改都会立即呈现在 Homestead 虚拟机中。</p>
<h4 id="使用-homesteadaliases-文件">
  使用 .homestead/aliases 文件
  <a class="heading-link" href="#%e4%bd%bf%e7%94%a8-homesteadaliases-%e6%96%87%e4%bb%b6">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h4>
<p>每当你需要使用 <code>homestead up --provision</code> 或 <code>homestead provision</code> 命令重新配置 Homestead 时，<code>.homestead/aliases</code> 文件都会更新 Homestead 虚拟机中的各个替身。</p>
<p>所以通过这个文件，我们可以轻松添加新的替身、函数甚至其他环境变量。</p>
<h4 id="保持-homestead-虚拟机在最新状态">
  保持 Homestead 虚拟机在最新状态
  <a class="heading-link" href="#%e4%bf%9d%e6%8c%81-homestead-%e8%99%9a%e6%8b%9f%e6%9c%ba%e5%9c%a8%e6%9c%80%e6%96%b0%e7%8a%b6%e6%80%81">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h4>
<p>上文提到，只需两条命令就可以将 Homestead 虚拟机里的 Ubuntu 操作系统更新到最新状态。</p>
<p>保持 Ubuntu 最新</p>
<div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ sudo apt-get update
</span></span><span style="display:flex;"><span>$ sudo apt-get upgrade
</span></span></code></pre></div><h2 id="本文回顾">
  本文回顾
  <a class="heading-link" href="#%e6%9c%ac%e6%96%87%e5%9b%9e%e9%a1%be">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>本章详细讲解了 <code>homestead</code> 和 <code>laravel</code> 命令，以及创建一个 Laravel 5.1 工程的简单六步。</p>

      </div>


      <footer>
        


        <div id="disqus_thread"></div>
<script>
  window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "otaku-mogita" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
    
    document.addEventListener('themeChanged', function (e) { 
        if (document.readyState == 'complete') {
          DISQUS.reset({ reload: true, config: disqus_config });
        }
    });
</script>
        
        
      </footer>
    </article>

    
  </section>

    </div>

    <footer class="footer">
  <section class="container">
    ©
    
      2010 -
    
    2022
     Yun Wang 
    ·
    
    Powered by <a href="https://gohugo.io/">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/">Coder</a>.
    
  </section>
</footer>

  </main>

  

  
  
  <script src="/js/coder.js"></script>
  

  

  

  

  

  

  

  

  

  
</body>

</html>
