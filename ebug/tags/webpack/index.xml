<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>webpack on mogita</title>
    <link>http://localhost:1313/tags/webpack.html</link>
    <description>Recent content in webpack on mogita</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-US</language>
    <lastBuildDate>Mon, 10 Apr 2017 00:00:51 +0000</lastBuildDate><atom:link href="http://localhost:1313/tags/webpack/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>构建 Vue.js 工程时 .vue 文件解析报错</title>
      <link>http://localhost:1313/posts/vue-js-doesn-t-export-content.html</link>
      <pubDate>Mon, 10 Apr 2017 00:00:51 +0000</pubDate>
      
      <guid>http://localhost:1313/posts/vue-js-doesn-t-export-content.html</guid>
      <description>&lt;p&gt;在一台 CentOS 6 服务器上构建 Vue.js 项目时，&lt;code&gt;.vue&lt;/code&gt; 文件大量报错：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;xxx.vue doesn&amp;#39;t export content
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;这个错误的原因之一可能是 &lt;code&gt;node-sass&lt;/code&gt; 安装不正常。也就是说，在 &lt;code&gt;.vue&lt;/code&gt; 文件报错日志的最上方，或许能够看到 &lt;code&gt;node-sass&lt;/code&gt; 模块的相关出错信息。&lt;/p&gt;
&lt;p&gt;如果你能看到这个出错信息，可以参考一下我的解决方法。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;检查 &lt;code&gt;node-sass&lt;/code&gt; 包是否正确安装和编译，以及在 &lt;code&gt;node-sass&lt;/code&gt; 包目录下生成 &lt;code&gt;vendor&lt;/code&gt; 文件夹。如果没有正确生成，需检查工程所在目录的读写或执行权限。&lt;/li&gt;
&lt;li&gt;编译环境中 &lt;code&gt;gcc&lt;/code&gt; 版本要在 4.9 或以上。我原先的版本是 4.8.8，它导致 &lt;code&gt;webpack&lt;/code&gt; 在构建 Vue.js 工程时报错：&lt;code&gt;Error: /usr/lib64/libstdc++.so.6: version CXXABI_1.3.5&#39; not found&lt;/code&gt;。你需要更新 gcc 版本。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;更新 &lt;code&gt;gcc&lt;/code&gt; 方法参考：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;先安装 gcc 4.9&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#81a1c1&#34;&gt;cd&lt;/span&gt; /etc/yum.repos.d
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;wget http://linuxsoft.cern.ch/cern/scl/slc6-scl.repo
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;yum -y --nogpgcheck install devtoolset-3-gcc devtoolset-3-gcc-c++
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;然后修改 &lt;code&gt;.bashrc&lt;/code&gt; 设置 gcc 的执行路径&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;vi ~/.bashrc
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;修改或插入 PATH 变量&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;PATH=/opt/rh/devtoolset-3/root/usr/bin/:$PATH
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;进入工程目录，执行 &lt;code&gt;rm -rf node_modules/node-sass/ &amp;amp;&amp;amp; yarn add node-sass&lt;/code&gt; 再次安装并编译。如果安装过程无误，这次会由 gcc 4.9 进行编译。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;编译完成后，执行 &lt;code&gt;yarn build&lt;/code&gt; 或你的工程定义的构建命令来进行构建，应该不会再看到文章开头的错误了。&lt;/p&gt;
&lt;h2 id=&#34;20170601-更新&#34;&gt;
  20170601 更新
  &lt;a class=&#34;heading-link&#34; href=&#34;#20170601-%e6%9b%b4%e6%96%b0&#34;&gt;
    &lt;i class=&#34;fa fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;Link to heading&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;Link to heading&lt;/span&gt;
  &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;CentOS 7 系统请参考这个 &lt;a href=&#34;https://gist.github.com/mogita/c3528c5229479c8e02d85bc3f96010ef&#34;&gt;gist&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>
